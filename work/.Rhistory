knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# data2
source("data_cleaning.R")
setwd("~/git/banana-phone/work")
library(dplyr)
library(tidyr)
library(ggplot2)
library(psych)
#library(foreign)
# data2 <- read.csv("surveydata2.csv", stringsAsFactors = FALSE,
#                 na = c("#NULL!", "", "Refused"))
# unweighted data2 -- what is the difference?
#data2_unw <- read.csv("surveydata2_unw.csv", na = c("#NULL!", ""))
#data2_unw <- read.spss("data2file.sav", to.data2.frame = TRUE)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# data2
source("data_cleaning.R")
setwd("~/git/banana-phone/work")
library(dplyr)
library(tidyr)
library(ggplot2)
library(psych)
#library(foreign)
# data2 <- read.csv("surveydata2.csv", stringsAsFactors = FALSE,
#                 na = c("#NULL!", "", "Refused"))
# unweighted data2 -- what is the difference?
#data2_unw <- read.csv("surveydata2_unw.csv", na = c("#NULL!", ""))
#data2_unw <- read.spss("data2file.sav", to.data2.frame = TRUE)
ggplot(data2[!is.na(data2$Q1), ]) + geom_bar(mapping = aes(x = Q1, fill = Q1))
source("data_cleaning.R")
install.packages("car")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# data2
source("data_cleaning.R")
setwd("~/git/banana-phone/work")
library(dplyr)
library(tidyr)
library(ggplot2)
library(psych)
#library(foreign)
# data2 <- read.csv("surveydata2.csv", stringsAsFactors = FALSE,
#                 na = c("#NULL!", "", "Refused"))
# unweighted data2 -- what is the difference?
#data2_unw <- read.csv("surveydata2_unw.csv", na = c("#NULL!", ""))
#data2_unw <- read.spss("data2file.sav", to.data2.frame = TRUE)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other)
sick <- filter(data2, Q2=='Yes')
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other)
sick = sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other)
View(sick)
count(q, r)
sick %>%
group_by(q, r)
count(q, r)
sick <- filter(data2, Q2=='Yes')
sick <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other)
group_by(q, r)
sick <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
sick <- filter(data2, Q2=='Yes')
sick <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
sick %>%
count(q, r)
View(sick)
with(sick, table(q))
with(sick, table(q, r))
with(sick, prop.table(table(q, r)))
sick <- data2 %>%
filter(Q2=='Yes')
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r) %>%
count(q, r)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
count(q, r)
sick %>%
count(q, r)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r) %>%
count(q, r)
with(sick, prop.table(table(q, r)))
sick <- data2 %>%
filter(Q2=='Yes')
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r) %>%
count(q, r)
sick <- data2 %>%
filter(Q2=='Yes')
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r) %>%
count(q, r)
sick <- data2 %>%
filter(Q2=='Yes')
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
sick <- data2 %>%
filter(Q2=='Yes') %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
sick <- data2 %>%
filter(Q2=='Yes') %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r) %>%
count(q, r)
sick
with(sick, prop.table(table(q, r)))
with(sick, table(q, r)
)
with(sick, table(q, r))
sick <- data2 %>%
filter(Q2=='Yes') %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
with(sick, table(q, r))
with(sick, prop.table(table(q, r)))
with(sick, table(q, r))
sick1 <- data2 %>%
filter(Q2=='Yes')
sick <- data2 %>%
filter(Q2=='Yes')
sick1 <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r)
with(sick1, table(q, r))
with(sick1, prop.table(table(q, r)))
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
count(PPGENDER, r)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
count(PPGENDER)
count(PPGENDER, PPINCIMP)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
count(PPGENDER, PPINCIMP)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
summarize(PPGENDER)
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
summarize(n = count())
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
group_by(PPGENDER) %>%
summarize(n = count())
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
group_by(PPGENDER) %>%
summarize(n = count(n))
sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK) %>%
group_by(PPGENDER) %>%
summarize(count(n))
sick1 <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(PPGENDER, q, r) %>%
summarise(n = n())
View(sick1)
sick1 <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(q, r, PPGENDER) %>%
summarise(n = n())
sick1
sick1 <- sick %>%
select(PPGENDER, PPAGE, PPEDUC, PPETHM, PPINCIMP, PPWORK, Q7_1_Bus:Q7_otherText) %>%
gather("q", "r", Q7_1_Bus:Q7_7_Other) %>%
group_by(PPGENDER, q, r) %>%
summarise(n = n())
sick1
with(sick1, table(q, r))
with(sick, table(Q2))
with(sick, table(PPGENDER))
with(sick, table(PPINCIMP))
with(sick, prop.table(table(PPGENDER)))
# of those sick, 56% were female, 43% were male
with(sick, prop.table(table(PPGENDER)))
with(sick, table(PPINCIMP))
with(data2, table(Q2))
with(data2, table(Q2, PPGENDER))
with(data2, table(Q2))
with(data2, table(Q2, PPGENDER))
with(sick, table(PPGENDER))
with(sick, prop.table(table(PPGENDER)))
with(data2, table(PPINCIMP))
with(data2, table(Q2, PPINCIMP))
with(data2, table(PPINCIMP, Q2))
with(data2, prop.table(table(PPINCIMP, Q2)))
with(data2, table(PPINCIMP, Q2))
with(data2, prop.table(table(PPINCIMP, Q2)))
with(data2, prop.table(table(PPINCIMP, Q2)), margin = 1)
with(data2, table(Q2))
with(data2, table(Q2, PPGENDER))
with(data2, addmargins(table(Q2, PPGENDER)))
with(sick, prop.table(table(PPGENDER)))
with(data2, table(PPINCIMP, Q2))
with(data2, addmargins(table(PPINCIMP, Q2)))
with(data2, prop.table(table(PPINCIMP, Q2)), margin = 1)
